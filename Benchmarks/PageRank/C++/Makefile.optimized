-include ../Makefile.defaults

CC := g++
CFLAGS := -O3 -fopenmp
OUT := ./optimized

compile:
	$(CC) optimized.cpp -o $(OUT) $(CFLAGS)

clean:
	rm $(OUT)

measure:
ifndef JSON
	$(error No JSON defined.)
else ifndef ARGS
	$(error No ARGS defined.)
endif
	@../../../RAPL/build/rapl --json "$(JSON)" $(OUT) $(ARGS)

command:
ifndef ARGS
	$(error No ARGS defined.)
endif
	@echo $(OUT) $(ARGS)